"""
ะะฑัะฐะฑะพััะธะบะธ ะฑะฐะทะพะฒัั ะบะพะผะฐะฝะด ะฑะพัะฐ (/start, /help)
"""

import logging
from aiogram import Router, F
from aiogram.filters import Command, StateFilter
from aiogram.types import Message
from aiogram.fsm.context import FSMContext

from telegram_doc_bot.utils.keyboards import get_main_keyboard
from telegram_doc_bot.config import Config

logger = logging.getLogger(__name__)

# ะกะพะทะดะฐะฝะธะต ัะพััะตัะฐ ะดะปั ะฑะฐะทะพะฒัั ะบะพะผะฐะฝะด
router = Router()


@router.message(Command("start"))
async def cmd_start(message: Message, state: FSMContext):
    """
    ะะฑัะฐะฑะพััะธะบ ะบะพะผะฐะฝะดั /start
    
    Args:
        message: ะกะพะพะฑัะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั
        state: ะกะพััะพัะฝะธะต FSM
    """
    # ะัะธััะบะฐ ัะพััะพัะฝะธั ะฟัะธ ััะฐััะต
    await state.clear()
    
    user_name = message.from_user.first_name or "ะะพะปัะทะพะฒะฐัะตะปั"
    
    welcome_text = (
        f"๐ <b>ะัะธะฒะตั, {user_name}!</b>\n\n"
        f"๐ค ะฏ ัะผะฝัะน ะฑะพั ะดะปั ะฐะฒัะพะผะฐัะธัะตัะบะพะน ะณะตะฝะตัะฐัะธะธ ะดะพะบัะผะตะฝัะพะฒ ั ะฟะพะผะพััั ะฝะตะนัะพัะตัะธ Google Gemini.\n\n"
        f"โจ <b>ะะพะธ ะฒะพะทะผะพะถะฝะพััะธ:</b>\n"
        f"๐ ะกะพะทะดะฐะฝะธะต ะดะพะบัะผะตะฝัะพะฒ ะปัะฑะพะณะพ ัะธะฟะฐ\n"
        f"โ๏ธ ะะฝัะตะปะปะตะบััะฐะปัะฝะพะต ัะตะดะฐะบัะธัะพะฒะฐะฝะธะต ัะตะบััะฐ\n"
        f"๐ ะะพะดะดะตัะถะบะฐ 6 ัะทัะบะพะฒ\n"
        f"๐ ะกัะฐัะธััะธะบะฐ ะธ ะธััะพัะธั\n"
        f"โญ ะะทะฑัะฐะฝะฝัะต ัะฐะฑะปะพะฝั\n"
        f"๐จ ะะฐัััะพะนะบะฐ ััะธะปั ะธ ัะพัะผะฐัะธัะพะฒะฐะฝะธั\n\n"
        f"๐ฏ <b>ะะฐัะฐะปะพ ัะฐะฑะพัั:</b>\n"
        f"1๏ธโฃ ะะฐะถะผะธัะต \"๐ ะะพะน API ะบะปัั\"\n"
        f"2๏ธโฃ ะะพะฑะฐะฒััะต ะฑะตัะฟะปะฐัะฝัะน ะบะปัั Gemini\n"
        f"3๏ธโฃ ะะฐัะฝะธัะต ัะพะทะดะฐะฒะฐัั ะดะพะบัะผะตะฝัั!\n\n"
        f"๐ก <b>ะญัะพ ะทะฐะนะผัั ะฒัะตะณะพ 2 ะผะธะฝััั</b>\n\n"
        f"โ ะัะถะฝะฐ ะฟะพะผะพัั? ะะฐะถะผะธัะต \"โ ะะพะผะพัั\""
    )
    
    await message.answer(
        welcome_text,
        reply_markup=get_main_keyboard()
    )
    
    logger.info(f"ะะพะปัะทะพะฒะฐัะตะปั {message.from_user.id} ({user_name}) ะทะฐะฟัััะธะป ะฑะพัะฐ")


@router.message(Command("help"))
@router.message(F.text == "โ ะะพะผะพัั")
async def cmd_help(message: Message):
    """
    ะะฑัะฐะฑะพััะธะบ ะบะพะผะฐะฝะดั /help ะธ ะบะฝะพะฟะบะธ "ะะพะผะพัั"
    
    Args:
        message: ะกะพะพะฑัะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั
    """
    help_text = (
        "๐ <b>ะัะบะพะฒะพะดััะฒะพ ะฟะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะฑะพัะฐ</b>\n\n"
        
        "โโโโโโโโโโโโโโโโโโโโโโ\n"
        "๐ฏ <b>ะะซะกะขะะซะ ะกะขะะะข</b>\n"
        "โโโโโโโโโโโโโโโโโโโโโโ\n\n"
        
        "1๏ธโฃ ะะฐัััะพะนัะต API ะบะปัั ัะตัะตะท \"๐ ะะพะน API ะบะปัั\"\n"
        "2๏ธโฃ ะัะฑะตัะธัะต \"๐ ะกะพะทะดะฐัั ะดะพะบัะผะตะฝั\"\n"
        "3๏ธโฃ ะะฟะธัะธัะต, ััะพ ะฒะฐะผ ะฝัะถะฝะพ\n"
        "4๏ธโฃ ะะพะปััะธัะต ะณะพัะพะฒัะน ะดะพะบัะผะตะฝั!\n\n"
        
        "โโโโโโโโโโโโโโโโโโโโโโ\n"
        "๐ <b>ะขะะะซ ะะะะฃะะะะขะะ</b>\n"
        "โโโโโโโโโโโโโโโโโโโโโโ\n\n"
        
        "๐ <b>ะะพะณะพะฒะพั</b> - ััะธะดะธัะตัะบะธะต ะดะพะบัะผะตะฝัั\n"
        "๐ <b>ะะฐัะฒะปะตะฝะธะต</b> - ะพัะธัะธะฐะปัะฝัะต ะทะฐัะฒะปะตะฝะธั\n"
        "๐ <b>ะะตะทัะผะต</b> - ะฟัะพัะตััะธะพะฝะฐะปัะฝะพะต CV\n"
        "โ๏ธ <b>ะะตะปะพะฒะพะต ะฟะธััะผะพ</b> - ะบะพััะตัะฟะพะฝะดะตะฝัะธั\n"
        "๐ <b>ะัััั</b> - ะฐะฝะฐะปะธัะธะบะฐ ะธ ะพััััั\n"
        "๐งพ <b>ะกััั</b> - ััะตัะฐ ะฝะฐ ะพะฟะปะฐัั\n"
        "๐ผ <b>ะะ</b> - ะบะพะผะผะตััะตัะบะธะต ะฟัะตะดะปะพะถะตะฝะธั\n"
        "๐ <b>ะัะพัะพะบะพะป</b> - ะฟัะพัะพะบะพะปั ะฒัััะตั\n"
        "๐ <b>ะะฝััััะบัะธั</b> - ััะบะพะฒะพะดััะฒะฐ\n\n"
        
        "โโโโโโโโโโโโโโโโโโโโโโ\n"
        "โจ <b>ะะะะะะะะะกะขะ</b>\n"
        "โโโโโโโโโโโโโโโโโโโโโโ\n\n"
        
        "โ๏ธ <b>ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต</b> - ะธะทะผะตะฝัะนัะต ะดะพะบัะผะตะฝัั\n"
        "๐๏ธ <b>ะัะตะดะฟัะพัะผะพัั</b> - ะฟัะพัะผะพัั ะฟะตัะตะด ัะพััะฐะฝะตะฝะธะตะผ\n"
        "โญ <b>ะะทะฑัะฐะฝะฝะพะต</b> - ัะพััะฐะฝัะนัะต ะปัััะธะต ะดะพะบัะผะตะฝัั\n"
        "๐ <b>ะััะพัะธั</b> - ะดะพัััะฟ ะบ ะฟัะพัะปัะผ ะดะพะบัะผะตะฝัะฐะผ\n"
        "๐ <b>ะกัะฐัะธััะธะบะฐ</b> - ะพััะปะตะถะธะฒะฐะนัะต ะฟัะพะณัะตัั\n"
        "๐ <b>6 ัะทัะบะพะฒ</b> - ัะพะทะดะฐะฒะฐะนัะต ะฝะฐ ัะฐะทะฝัั ัะทัะบะฐั\n"
        "๐จ <b>ะกัะธะปะธ</b> - ะฒัะฑะธัะฐะนัะต ัะพะฝ ะดะพะบัะผะตะฝัะฐ\n\n"
        
        "โโโโโโโโโโโโโโโโโโโโโโ\n"
        "โ๏ธ <b>ะะะะะะะซ</b>\n"
        "โโโโโโโโโโโโโโโโโโโโโโ\n\n"
        
        "/start - ะะฐะฟัััะธัั ะฑะพัะฐ\n"
        "/help - ะะพะบะฐะทะฐัั ัะฟัะฐะฒะบั\n"
        "/apikey - ะฃะฟัะฐะฒะปะตะฝะธะต API ะบะปััะพะผ\n"
        "/generate - ะกะพะทะดะฐัั ะดะพะบัะผะตะฝั\n"
        "/cancel - ะัะผะตะฝะธัั ะพะฟะตัะฐัะธั\n\n"
        
        "โโโโโโโโโโโโโโโโโโโโโโ\n"
        "๐ก <b>ะกะะะะขะซ</b>\n"
        "โโโโโโโโโโโโโโโโโโโโโโ\n\n"
        
        "โซ๏ธ ะัะดััะต ะบะพะฝะบัะตัะฝั ะฒ ะพะฟะธัะฐะฝะธะธ\n"
        "โซ๏ธ ะฃะบะฐะทัะฒะฐะนัะต ะฒัะต ะฒะฐะถะฝัะต ะดะตัะฐะปะธ\n"
        "โซ๏ธ ะัะฟะพะปัะทัะนัะต ะฝะฐัััะพะนะบะธ ะดะปั ะปัััะธั ัะตะทัะปััะฐัะพะฒ\n"
        f"โซ๏ธ ะะฐะบัะธะผัะผ {Config.MAX_REQUEST_LENGTH} ัะธะผะฒะพะปะพะฒ ะฝะฐ ะทะฐะฟัะพั\n\n"
        
        "๐ <b>ะะพะปััะธัั API ะบะปัั:</b>\n"
        "https://aistudio.google.com/app/apikey\n\n"
        
        "โ ะััั ะฒะพะฟัะพัั? ะะฐะฟะธัะธัะต ะฒ ะฟะพะดะดะตัะถะบั!"
    )
    
    await message.answer(
        help_text,
        parse_mode="HTML",
        reply_markup=get_main_keyboard()
    )


@router.message(F.text == "โน๏ธ ะ ะฑะพัะต")
async def cmd_about(message: Message):
    """
    ะะฑัะฐะฑะพััะธะบ ะบะฝะพะฟะบะธ "ะ ะฑะพัะต"
    
    Args:
        message: ะกะพะพะฑัะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั
    """
    about_text = (
        "๐ค <b>ะ ะฑะพัะต ะดะปั ะณะตะฝะตัะฐัะธะธ ะดะพะบัะผะตะฝัะพะฒ</b>\n\n"
        
        "โโโโโโโโโโโโโโโโโโโโโโ\n"
        "๐ <b>ะขะะฅะะะะะะะ</b>\n"
        "โโโโโโโโโโโโโโโโโโโโโโ\n\n"
        
        "๐ง <b>Google Gemini AI</b>\n"
        "   ะะตะฝะตัะฐัะธั ะบะพะฝัะตะฝัะฐ ะฝะพะฒะพะณะพ ะฟะพะบะพะปะตะฝะธั\n\n"
        
        "๐ <b>Python-docx</b>\n"
        "   ะัะพัะตััะธะพะฝะฐะปัะฝัะต Word ะดะพะบัะผะตะฝัั\n\n"
        
        "๐ <b>ReportLab</b>\n"
        "   ะะฐัะตััะฒะตะฝะฝัะต PDF ัะฐะนะปั\n\n"
        
        "โก <b>Aiogram 3.x</b>\n"
        "   ะััััะฐั ัะฐะฑะพัะฐ ั Telegram\n\n"
        
        "โโโโโโโโโโโโโโโโโโโโโโ\n"
        "โจ <b>ะะะะะะฃะฉะะกะขะะ</b>\n"
        "โโโโโโโโโโโโโโโโโโโโโโ\n\n"
        
        "โก ะะณะฝะพะฒะตะฝะฝะฐั ะณะตะฝะตัะฐัะธั ะทะฐ 10-30 ัะตะบ\n"
        "๐ฏ ะััะพะบะพะต ะบะฐัะตััะฒะพ ัะตะบััะฐ\n"
        "โ๏ธ ะฃะผะฝะพะต ัะตะดะฐะบัะธัะพะฒะฐะฝะธะต\n"
        "๐ ะะพะดะดะตัะถะบะฐ 6 ัะทัะบะพะฒ\n"
        "๐ ะะตะทะพะฟะฐัะฝะพะต ััะฐะฝะตะฝะธะต ะดะฐะฝะฝัั\n"
        "๐ ะะตัะฐะปัะฝะฐั ััะฐัะธััะธะบะฐ\n"
        "๐พ ะััะพัะธั ะฒัะตั ะดะพะบัะผะตะฝัะพะฒ\n"
        "๐จ ะะธะฑะบะธะต ะฝะฐัััะพะนะบะธ\n\n"
        
        "โโโโโโโโโโโโโโโโโโโโโโ\n"
        "๐ <b>ะกะขะะขะะกะขะะะ</b>\n"
        "โโโโโโโโโโโโโโโโโโโโโโ\n\n"
        
        "๐จ 10+ ัะธะฟะพะฒ ะดะพะบัะผะตะฝัะพะฒ\n"
        "๐ 6 ัะทัะบะพะฒ ะธะฝัะตััะตะนัะฐ\n"
        "โ๏ธ 4 ััะธะปั ะพัะพัะผะปะตะฝะธั\n"
        "๐ 2 ัะพัะผะฐัะฐ ัะบัะฟะพััะฐ\n\n"
        
        "โโโโโโโโโโโโโโโโโโโโโโ\n\n"
        
        "๐ฆ <b>ะะตััะธั:</b> 2.0.0\n"
        "๐ <b>ะะฑะฝะพะฒะปะตะฝะพ:</b> 2024\n\n"
        
        "ะะฐะทัะฐะฑะพัะฐะฝะพ ั โค๏ธ ะดะปั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ ัะฐะฑะพัั\n\n"
        
        "๐ฌ <b>ะะฑัะฐัะฝะฐั ัะฒัะทั:</b>\n"
        "ะะฐัะธ ะธะดะตะธ ะฟะพะผะพะณัั ัะดะตะปะฐัั ะฑะพัะฐ ะปัััะต!"
    )
    
    await message.answer(
        about_text,
        parse_mode="HTML",
        reply_markup=get_main_keyboard()
    )
